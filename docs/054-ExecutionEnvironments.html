<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="icon" href="favicon.ico">

    <title>Embedded systems for ML</title>

    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/theme/pb.css">
    <link rel="stylesheet" href="pres-style.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
  </head>

  <body>
    <div class="reveal">
      <div class="slides">
      
        <!-- -------------------- Execution environments ---------------------------------------- -->
        
        <section id="executionEnvironments">
          <h3>Execution environments</h3>
        </section>
        <section>
          <p>Execution environment: what the target board provides to run an application.</p>
        </section>
        
        <!-- -------------------- Execution environments > bare metal ---------------------------------------- -->
        
        <section id="bareMetal">
          <h4>Bare metal</h4>
          <p>You write all the code:</p>
          <ul>
            <li>Configure and use interfaces and peripherals</li>
            <li>Define how to run several concurrent tasks</li>
            <li>Define how to share data between tasks</li>
            <li>Etc.</li>
          </ul>
        </section>
        
        <section>
          <ul>
            <li>Nowadays, an abstraction layer is provided by almost all 
              microcontroller manufacturers:
              <ul>
                <li>&rArr; Compatibility over a family of microcontrollers</li>
                <li>&rArr; A little bit easier to use peripherals and interfaces</li>
                <li>Arm: <a href="https://www.arm.com/technologies/cmsis" target="_blank">CMSIS</a></li>
                <li>Silicon Labs: <a href="https://www.silabs.com/developer-tools/simplicity-software-development-kit"
                      target="_blank"">(Part of) Simplicity SDK</a></li>
                <li>STMicroelectronics: <a href="https://github.com/STMicroelectronics/STM32Cube_MCU_Overall_Offer/blob/master/README.md#stm32cube-hal-drivers"
                      target="_blank">HAL + LL</a></li>
                <li>Espressif: <a href="https://www.espressif.com/en/products/sdks/esp-idf"
                      target="_blank">(Part of) ESP-IDF</a></li>
                <li>Etc.</li>
              </ul>
            </li>
          </ul>
        </section>
        
        <section>
          <img src="images/execEnv-bareMetal.png">
        </section>
        
        <!-- -------------------- Execution environments > RTOS ---------------------------------------- -->

        <section id="rtos">
          <h4>Real-Time Operating System (RTOS)</h4>
          <ul>
            <li>Provides real help to run concurrent tasks, share data between tasks, etc.</li>
            <li>Allows for deterministic response time</li>
            <li>Uses very little memory</li>
            <li>No protection between tasks, nor between tasks and RTOS (no virtual memory)</li>
            <li>No way to modify the application without rebuilding and reflashing (well, not fully true)</li>
          </ul>
        </section>

        <section>
          <img src="images/execEnv-Rtos.png">
        </section>
        
        <section>
          <p>Minimum required memory:</p>
          <ul>
            <li>RAM: a few KB</li>
            <li>Flash: a few KB</li>
            <li>Depends on the application</li>
          </ul>
        </section>

        <section>
          <img src="images/rtos.png">
          <div class="pbverysmall">Sources: <a href="https://www.freertos.org/index.html" title="FreeRTOS"
                                               target="_blank">FreeRTOS</a>,
            <a href="https://www.ecoscentric.com/ecos/index.shtml" title="eCos" target="_blank">eCos</a>,
            <a href="https://www.contiki-ng.org/" title="Contiki-NG"
               target="_blank">Contiki-NG</a>,
            <a href="http://riot-os.org/" title="RIOT" target="_blank">RIOT</a>,
            <a href="https://blackberry.qnx.com/en" title="QNX" target="_blank">QNX</a>,
           <a href="https://www.rt-thread.io/index.html" title="RT-Thread" target="_blank">RT-Thread</a>,
            <a href="https://www.zephyrproject.org/" title="Zephyr" target="_blank">Zephyr</a>,
            <a href="https://threadx.io/" title="ThreadX"
               target="_blank">ThreadX</a>,
            <a href="https://www.silabs.com/developer-tools/micrium-os" title="Micriµm OS" target="_blank">Micriµm OS</a>,
            <a href="https://microware.com/" title="OS-9" target="_blank">OS-9</a>,
            <a href="https://mynewt.apache.org/" title="Mynewt" target="_blank">Mynewt</a>,
            <a href="https://www.windriver.com/products/vxworks/" title="VxWorks"
               target="_blank">VxWorks</a>,
            <a href="https://www.lynx.com/products/lynxos-posix-real-time-operating-system-rtos"
               title="LynxOS" target="_blank">LynxOS</a>,
            <a href="https://www.zerynth.com/zos/" title="Zerynth OS" target="_blank">Zerynth OS</a>,
            <a href="https://nuttx.apache.org/" title="NuttX" target="_blank">NuttX</a>
          </div>        
        </section>

        <section>
          <ul>
            <li>FreeRTOS acquired by Amazon - 2017</li>
            <li>ThreadX acquired by Microsoft - 2019, transferred to the Eclipse Foundation, as open source - 2023</li>
            <li>Google and Meta support Zephyr</li>
          </ul>
        </section>
        
        <section>
          <p>Available services: will be seen farther.</p>
        </section>

        <!-- -------------------- Execution environments > OS ---------------------------------------- -->

        <section id="os">
          <h4>Operating System (OS)</h4>
          <ul>
            <li>Mainly: Linux</li>
            <li>Similar to a desktop computer environment:
              <ul>
                <li>Package manager, to install new applications</li>
                <li>Graphical user interface is possible</li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <p>Minimum required memory:</p>
          <ul>
            <li>RAM: a few MB or a few tens of MB</li>
            <li>Depends on applications</li>
          </ul>
          <p>Usually:</p>
          <ul>
            <li>RAM: from 512 MB to 8 GB</li>
            <li>Flash card: from 1 GB to 8 GB</li>
          </ul>
        </section>

        <section>
          <ul>
            <li>Linux typically requires an MMU (Memory Management Unit) &rArr; virtual memory</li>
            <li>The kernel can be configured to work without one
              <ul>
                <li>Thanks to μClinux project</li>
                <li>Beware about applications compatibility</li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <img src="images/embeddedOS.png">
          <div class="pbverysmall">Sources: <a href="https://isc.tamu.edu/~lewing/linux/" title="Larry Ewing"
                                               target="_blank">Larry Ewing</a>,
            <a href="https://www.yoctoproject.org/" title="Yocto Project" target="_blank">Yocto Project</a>,
            <a href="https://legato.io/" title="Legato" target="_blank">Legato</a>,
            <a href="https://archlinuxarm.org/" title="Arch Linux ARM" target="_blank">Arch Linux ARM</a>,
            <a href="https://openwrt.org/" title="OpenWrt Project" target="_blank">OpenWrt Project</a>,
            <a href="https://www.balena.io/os/" title="balenaOS" target="_blank">balenaOS</a>,
            <a href="https://www.windriver.com/products/linux/" title="Wind River" target="_blank">Wind
              River</a>,
            <a href="https://www.mvista.com/" title="MontaVista" target="_blank">MontaVista</a>,
            <a href="https://www.lynx.com/products/lynx-mosaic-modular-development-framework"
               title="LYNX MOSA.ic" target="_blank">LYNX MOSA.ic</a>
          </div>
        </section>
        
        <section>
          <p>Latest news: <a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=baeb9a7d8b60b021d907127509c44507539c15e5"
               target="_blank">real-time is now supported by mainline Linux kernel</a>.</p>
          <p>&rArr; "standard" Linux now can provide deterministic response time.</p>
        </section>

        <!-- -------------------- Practice session 01 - step 1: Hello World ---------------------------------------- -->
        
        <section id="practice01Step1">
          <h3>Practice session 01</h3>
          <p>Build and run an <em>Hello World</em> application for the EFR32xG24 Dev Kit.</p>
          <p>Execution environment: bare metal.</p>
        </section>
        
        <section>
          <h4>EFR32MG24</h4>
          <img src="images/efr32mg24-functional-diagram.png">
          <div class="pbverysmall">Source: 
            <a
              href="https://www.silabs.com/documents/public/data-sheets/efr32mg24-datasheet.pdf"
              title="EFR32MG24 Datasheet"
              target="_blank">EFR32MG24 Datasheet</a></div>
        </section>
        
        <section>
          <h4>xG24 Dev Kit</h4>
          <img src="images/efr32xg24-dev-kit-annotated-photo.png" height="400">
          <div class="pbverysmall">Source: 
            <a
              href="https://www.silabs.com/documents/public/user-guides/ug524-brd2601b-user-guide.pdf"
              title="xG24 Dev Kit User's Guide" 
              target="_blank">xG24 Dev Kit User's Guide</a></div>
        </section>
        
        <section>
          <h4>Reference documentation</h4>
          <ul>
            <li>Microcontroller:
              <ul>
                <li><a href="https://www.silabs.com/documents/public/data-sheets/efr32mg24-datasheet.pdf"
                       target="_blank">
                  EF32MG24 Wireless SoC Family Data Sheet</a> (132 pages)</li>
                <li><a href="https://www.silabs.com/documents/public/reference-manuals/efr32xg24-rm.pdf"
                       target="_blank">
                  EFR32xG24 Wireless SoC Reference Manual</a> (1152 pages)</li>
              </ul>
            </li>
            <li>Board:
              <ul>
                <li><a href="https://www.silabs.com/documents/public/user-guides/ug524-brd2601b-user-guide.pdf"
                       target="_blank">
                  xG24 Dev Kit User's Guide</a></li>
                <li><a href="https://www.silabs.com/documents/public/schematic-files/BRD2601B-A01-schematic.pdf"
                       target="_blank">
                  Schematic - Revision A01</a></li>
              </ul>
            </li>
            <li>Sofware:
              <ul>
                <li><a href="https://docs.silabs.com/" target="_blank">Developer Documentation</a>:
                  <ul>
                    <li><a href="https://docs.silabs.com/simplicity-studio-5-users-guide/latest/ss-5-users-guide-overview/"
                           target="_blank"">Simplicity Studio 5 User's Guide</a></li>
                    <li><a href="https://docs.silabs.com/gecko-platform/5.2.2/platform-overview/"
                           target="_blank">Platform (SDK)</a></li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </section>
        
        <section>
          <h4>Development environments</h4>
          <p>Several possibilities:</p>
          <ul>
            <li>Simplicity Studio v5 (SSv5) - based upon Eclipse IDE</li>
            <li>VS Code + extension</li>
            <li>...</li>
          </ul>
          <p class="fragment">We will use SSv5.</p>
        </section>
        
        <section>
          <h4>SSv5</h4>
          <div class="r-stack">
            <div class="fragment fade-out" data-fragment-index="0">
              <img src="images/efr32DevEnvironmentWithoutCallouts.png">
            </div>
            <div class="fragment fade-in-then-out" data-fragment-index="0">
              <img src="images/efr32DevEnvironmentCallouts1.png">
            </div>
          </div>
        </section>
        
        <section>
          <h4>Practice session 01 - step 1</h4>
          <ul>
            <li>Using <em>git</em>, clone the <a href="https://github.com/PascalBod/embedded-systems-for-ML"
                                          target="_blank">
              <code>embedded-systems-for-ML</code> GitHub repository</a>:
              <pre><code data-trim data-noescape>
                $ git clone https://github.com/PascalBod/embedded-systems-for-ML.git
              </code></pre>
              </li>
            <li>Follow the instructions provided by the 
                <a href="https://github.com/PascalBod/embedded-systems-for-ML/blob/main/practice-sessions/01-HelloWorld-step1/README.md"
                   target="_blank"><code>embedded-systems-for-ML/practice-sessions/01-HelloWorld-step1/README.md</code></a>
                file.</li>
          </ul>
        </section>
        
        <!-- -------------------- Software development - introduction > debugging ------------------------- -->
        
        <section id="debugging">
          <h4>Debugging</h4>
          <p><em>Debugging:</em> process of finding the root cause of a bug.</p>
          <p class="fragment">Always try to reduce time devoted to debugging. How to do this is not part
             of this course, even if it contains some related information.</p>
        </section>
        
        <section>
          <h4>Generic architecture</h4>
          <img src="images/debuggingArchitecture.png">
        </section>
        
        <section>
          <ul>
            <li>Microcontroller controlled by the debug probe</li>
            <li class="fragment">JTAG: an industry standard, initially developped for verifying printed circuit boards (PCB)</li>
            <li class="fragment">SWD: an Arm standard, fully debug oriented</li>
            <li class="fragment">Debug probe controlled by the debugger server</li>
            <li class="fragment">Debugger client used to send commands: run, pause, step, set breakpoint, etc.</li>
          </ul>
        </section>
        
        <section>
          <p>For most of the dev boards, a simple probe is part of the board:</p>
          <img src="images/onBoardDebugger.png">
        </section>
        
        <!-- -------------------- Practice session 01 - step 2: breakpoint ---------------------------------------- -->
        
        <section id="practice01Step2">
          <h4>Practice session 01 - step 2</h4>
          <ul>
            <li>Follow the instructions provided by the 
                <a href="https://github.com/PascalBod/embedded-systems-for-ML/blob/main/practice-sessions/01-HelloWorld-step2/README.md"
                   target="_blank"><code>embedded-systems-for-ML/practice-sessions/01-HelloWorld-step2/README.md</code></a>
                file.</li>          
            </ul>
        </section>      

      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
      hash: true,
      slideNumber: 'c/t',
      // Scroll view inhibited until arrow keys can be used.
      //view: 'scroll',
      //scrollProgress: true,
      // Learn about plugins: https://revealjs.com/plugins/
      plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
      });
    </script>
  </body>
</html>
